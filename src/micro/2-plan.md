---
title: 微前端方案
order: 2
category: false
tag:
  - 微前端方案
---

参考链接 1：https://juejin.cn/post/6844904162509979662

参考链接 2：https://blog.csdn.net/weixin_43522687/article/details/106750074

## 实现方案

单纯根据对概念的理解，很容易想到实现微前端的重要思想就是将应用进行拆解和整合，通常是一个父应用加上一些子应用，那么使用类似 Nginx 配置不同应用的转发，或是采用 iframe 来将多个应用整合到一起等等这些其实都属于微前端的实现方案，也是微前端概念出现前 web 应用之间的整合方案。除此之外，也有真正全新的实现方案：

**Nginx 路由转发**：通过 Nginx 配置反向代理来实现不同路径映射到不同应用，例如：`www.xxx.com/app1`映射 app1，`www.xxx.com/app2`映射到 app2，这种**整合方案**并不属于前端层面的改造，更多的是运维的配置

**iframe 嵌套**：父应用单独是一个页面，每个子应用嵌套一个 iframe，父子通信可采用 postMessage 或者 contentWindow 等方式

**Web Components**：全新的开发模式，每个子应用需要采用纯 Web Components 技术编写组件。每个子应用都拥有单独的 js 和 css，支持单独部署

**组合式应用路由分发**：每个子应用独立构建和部署，运行时由父应用来进行路由管理，应用加载、启动、卸载以及通信等

| 方案               | 优点                                               | 缺点                                                                                               |
| :----------------- | :------------------------------------------------- | :------------------------------------------------------------------------------------------------- |
| Nginx 转发         | 简单，快速，易配置                                 | 在切换应用时会触发浏览器刷新，影响体验                                                             |
| iframe 嵌套        | 实现简单，子应用之间自带沙箱，天然隔离，互不影响   | iframe 的样式显示、兼容性都很局限；太过简单而显得 low                                              |
| Web Components     | 每个子应用拥有独立的 script 和 css，也可单独部署   | 对于历史系统，改造成本高，子应用通信较为复杂，易踩坑                                               |
| 组合式应用路由分发 | 纯前端改造，体验良好，可无感知切换，子应用相互隔离 | 需要设计和开发，由于父子应用处于同一页面运行，需要解决子应用的样式冲突、变量污染、通信机制等技术点 |

上述方案中，每种都有自己的优劣，最原始的 Nginx 配置反向代理是从接入层的角度来将系统进行分离，但是需要运维配置，而 iframe 嵌套是最简单和最快速的方案，但是 iframe 的弊端也是无法避免的，而 Web Components 的方案则需要大量的改造成本，最后的组合式应用路由分发方案改造成本中等并且能满足大部分需求，也不影响各前端应用的体验，是当下各个业务普遍采用的一种方案