---
title: 代码层面优化
order: 1
category: false
tag:
  - JS性能优化
  - 内存管理
  - 垃圾回收
---

## 垃圾回收

JS 中的内存管理遵循：申请内存空间 -> 使用内存空间 -> 释放内存空间 的顺序

垃圾回收机制：

1. JS 自动进行内存管理
2. 对象不再被引用时就是垃圾
3. 对象不能从根（全局变量对象）上访问的时候就是垃圾

下面的垃圾回收算法都按照这个机制执行垃圾回收

## 垃圾回收(GC)算法

GC可以找到内存中的垃圾，并释放和回收空间

优点：

- 发现垃圾立即回收
- 最大限度地减少程序暂停

缺点：

- 循环引用对象无法回收
- 时间开销大（时刻维护对象的引用）

常用的GC算法如下。

### 引用计数

维护一个引用计数器，判断当前引用数是否为0

引用数字为0的时候立即回收

互相引用的对象无法被回收

优缺点：

- 可以即时回收垃圾对象
- 减少程序卡顿时间
- 无法回收循环引用的对象
- 资源消耗较大