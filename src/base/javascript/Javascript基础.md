---
title: Javascript基础
order: 1
category: false
tag:
  - Javascript基础
  - JS基本语法
---

## JS 历史介绍

JS 诞生于 1995 年，出现主要是用于处理网页中的前端验证（检查用户输入内容是否符合一定规则）。

市面上存在两个版本的 JS，分别是 JavaScript 和 JScript，为了确保标准一致，制定了共同的标准名为 ECMAScript。

![历史时间表](https://misaka10032.oss-cn-chengdu.aliyuncs.com/Javascript/time%E6%97%B6%E9%97%B4%E8%A1%A8)

不同浏览器的不同实现方式

![不同浏览器实现](https://misaka10032.oss-cn-chengdu.aliyuncs.com/Javascript/time%E6%97%B6%E9%97%B4%E8%A1%A8)

ECMAScript 是 JavaScript 标准，所以一般情况下这两个词认为是一个意思，但实际上 JavaScript 的含义要更大一些。

一个完整的 JavaScript 实现应该由以下三个部分构成：

- ECMAScript：JavaScript 标准

- BOM：Browser Object Model 浏览器对象模型

- DOM：Document Object Model 文档对象模型

## 基础语法

### 写入方式

行内、内联、外联

同样的，JS 虽然可以写在标签属性中，但是结构与行为耦合，不方便维护，不推荐使用。

推荐方式：将 JS 代码编写到外部 JS 文件中，然后通过 script 标签引入。写到外部文件中可以在不同的页面中同时使用，也可以利用浏览器缓存机制。

**script 标签一旦用于引入外部文件，就不能在该标签内编写代码了，即使编写了浏览器也会忽略。**

### 执行顺序

从上到下逐行执行

### 基础输出语句

alert(); 控制浏览器弹出一个警示框

document.write(); 让计算机在页面 body 中输出一个内容

console.log(); 向控制台输出一个内容

## 书写规范

- 严格区分大小写

- 每一条语句以 ; 结尾（非强制）

- 忽略多个空格和换行

### 字面量与变量

字面量：就是数据，是源程序的组成部分之一。

变量：本质上是内存中的一块空间，这块空间有数据类型、名字、字面值。变量是内存中存储数据的最基本单元。

变量声明关键字：`var`

```js
// 声明一个字面为数字1的变量，变量名为a
var a = 1;
```

### 标识符

js 语法中的标识符包括变量名、函数名、属性名。

- 由字母、数字、\_、$组成

- 不能以数字开头

- 不能是 ES 中的关键字或保留字

![关键字和保留字](https://misaka10032.oss-cn-chengdu.aliyuncs.com/Javascript/%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E4%BF%9D%E7%95%99%E5%AD%97)

![其他不建议字符](https://misaka10032.oss-cn-chengdu.aliyuncs.com/Javascript/%E5%85%B6%E4%BB%96%E4%B8%8D%E5%BB%BA%E8%AE%AE%E5%AD%97%E7%AC%A6)

- 驼峰命名法

骆驼式命名法（Camel-Case）又称驼峰命名法，是电脑程式编写时的一套命名规则（惯例）。正如它的名称 CamelCase 所表示的那样，是指混合使用大小写字母来构成变量和函数的名字。程序员们为了自己的代码能更容易的在同行之间交流，所以多采取统一的可读性比较好的命名方式。

骆驼式命名法就是当变量名或函式名是由一个或多个单词连结在一起，而构成的唯一识别字时，第一个单词以小写字母开始；第二个单词的首字母大写或每一个单词的首字母都采用大写字母，例如：myFirstName、myLastName，这样的变量名看上去就像骆驼峰一样此起彼伏，故得名。

`小驼峰命名法：camelCase`

`下划线命名法：snake_case`

js 底层保存标识符实际采用 Unicode 编码，所以所有 UTF-8 内容理论上均可作为标识符。

## 数据类型（重要）

js 现阶段的数据类型有六种

- Number 数值型

- Boolean 布尔型

- String 字符串，注意在书写时需要用引号括起来，字符串内部的引号注意加转移字符 \

- Null 空类型

- Undefined 未定义类型

- Object 对象

除了 Object 是引用数据类型，其他都是基本数据类型。

### 转义字符

- `\"` 表示 `"`

- `\'` 表示 `'`

- `\n` 表示换行

- `\t` 表示制表符

### Number

js 中所有的数值都是 Number 类型，包括整数、浮点。

注意：

1. 当变量超过了 Number.MAX_VALUE 时，返回 Infinity

2. Number 变量被赋予了非数字值，返回 NaN(Not A Number)。使用 type of 检查 NaN，返回 Number

### Null

Null 类型只有一个值，就是 Null，专门用来表示一个空对象。typeof 检查返回 Object

### Undefined

声明变量不赋值，就为 undefined

### String

[字符串](#字符串-string)

### Object

[对象](#对象)

### 强制类型转换

#### 1. 转换 String

方法一：.toString() 不会影响原变量 null 和 undefined 没有 toString 方法，空指针异常

方法二：String()函数，跟方法一不同之处在于，null 和 undefined 会直接转换为 null 和 undefined

#### 2.转换 Number

方法一：Number()函数

- 纯数字字符串，转换为数字。

- 字符串有非数字内容，转换 NaN。

- 空串或者是一个全空格的字符串，转换为 0。

- 布尔值转换为 0 和 1。

- null 转为 0。

- undefined 转换为 NaN。

方法二：

parseInt() 字符串转为整数

parseFloat() 字符串转为浮点数

转换有效位置从字符串首字符为数字开始，非数字字符结束。如果首字符不是数字，返回 NaN

#### 3.转换 Boolean

方法一：Boolean 函数

数字 → 布尔，除了 0 和 NaN，其他都是 true

字符串 → 布尔，除了空串，其他都是 true

null 和 undefined 都是 false

方法二：任意数据类型两次取反，转换布尔值。

### 其他进制数字

十六进制 0x 开头

八进制 0 开头

二进制 0b 开头

**注意**：parseInt()里面可以传递第二个参数，指定数字进制

## 运算符

运算符也叫操作符，计算一个或多个值，返回运算结果

### 算数运算符

#### 1.加号 +

字符串两两相加，效果为字符串拼接

任何值与字符串相加，均转换为字符串再拼接

**转换字符串快捷方法：任意类型+ ""**

#### 2.减乘除模 - \* / %

任何值做减乘除模运算时都会转为 Number。

**转换 Number 快捷方法：任意类型 -0 \*1 /1 ""**

### 一元运算符

正号 + 负号 -

转换方法与 Number 函数一致。

### 自增和自减

++i 先自增，后赋值参与运算

i++先赋值参与运算，后自增

```js
var i = 1;
var j = 1;
// a的值是6
var a = i++ + 5;
// 2
console.log(i);
//7 b的值是7
var b = ++j + 5;
// 2
console.log(j);
console.log(a);
console.log(b);
```

### 逻辑运算符

&& 短路与 || 短路或 ! 非

非布尔值两次取反，返回 true

短路与：1.第一个值为 true，返回第二个值；2.第一个值为 false，返回第一个值。（注意返回原值）

短路或：1.第一个值为 true，返回第一个值；2.第一个值为 false，返回第二个值。（注意返回原值）

### 赋值运算符

+= -= \*= /=

变量对等号右边的字面量做相应的四则运算，得到的结果重新赋值给当前变量

```js
var a = 1;
var b = 2;
var c = 3;
var d = 4;
a += 1; // 2
b -= 2; // 0
c *= 2; // 6
d /= 2; // 2
```

### 关系运算符

大于 >

小于 <

等于 ==（仅为值比较）

不等于 !=（仅为值比较）

全等 ===（全等，包含类型比较）

不全等 !==（不全等，包含类型比较）

1.比较字符串时，比较的是字符串的字符编码，且一位一位进行比较。

因此比较两个字符串型数字一定要转型，否则可能得到不可预期结果。

2.其他类型跟 Number 比较，转换为数字后再比较。

3.Null、Undefined 跟数字比较均为 false，没有可比性。

4.NaN 不等于任何值

### Unicode 编码

\u + 4 位 Unicode 编码

网页 html 中的 Unicode 编码使用： &# + 编码。注意此处编码为十进制

### 三元运算符

条件表达式 ? 语句 1 : 语句 2;

判断表达式的值，如果是 true 则取值 1，如果是 false 则取值第二个 0；

### 空值合并操作符

比较 ?? 左右两侧的值，如果左侧为 null 或 undefined，返回右侧值，否则返回左侧值

```js
null ?? "hi"; // 'hi'
undefined ?? "hey"; // 'hey'
false ?? "hola"; // false
0 ?? "bonjour"; // 0
"first" ?? "second"; // first
```

### 逗号操作符

( _ , _ , _ , _)对每个操作数求值（从左到右），并返回最后一个操作数的值。

```js
var a=1 , b=2 , c=3

相当于：
var a=1
var b=2
var c=3
```

```js
a = ((b = 1), (c = 2)); //连续执行和赋值
console.log(a); //返回2
console.log(b); //返回1
console.log(c); //返回2
```

### 隐式类型转换

上述运算在两变量类型不相同时均遵循[隐式类型转换](https://www.cnblogs.com/WayToGo-hwd/p/13994961.html)

## 流程控制语句

### 条件判断语句 if

单 if：满 30 减 20 用程序表示

```js
var a = 30;
if (a >= 30) {
  console.log(a - 20);
}
```

如果语句块之间只有一行代码，大括号可以省略

if-else：满 100 减 20 否则打九折

```js
var a = 90;
if (a >= 100) {
  console.log(a - 20);
} else {
  console.log(a * 0.9);
}
```

### 条件分支语句 switch

switch 语句用于基于不同的条件来执行不同的动作

```js
switch(n)
{
    case 1:
        执行代码块 1
        break;
    case 2:
        执行代码块 2
        break;
    default:
        与 case 1 和 case 2 不同时执行的代码
}
```

工作原理：首先设置表达式 n（通常是一个变量）。随后表达式的值会与结构中的每个 case 的值做比较。如果存在匹配，则与该 case 关联的代码块会被执行。请使用 break 来阻止代码自动地向下一个 case 运行

- default 关键词

default 关键词用来规定匹配不存在时做的事情

```js
var x;
var d = new Date().getDay();
switch (d) {
  case 6:
    x = "今天是星期六";
    break;
  case 0:
    x = "今天是星期日";
    break;
  default:
    x = "期待周末";
}
// 如果今天不是星期六或星期日，则会输出默认的消息
console.log(x);
```

### 循环语句

循环结构的执行步骤

1. 声明循环变量；

2. 判断循环条件;

3. 执行循环体操作；

4. 更新循环变量；

5. 然后循环执行 2-4，直到条件不成立，跳出循环。

#### 1. while 循环

```js
var num = 1; //1、声明循环变量

while (num <= 10) {
  //2、判断循环条件;
  document.write(num + "<br />"); //3、执行循环体操作；
  num++; //4、更新循环变量；
}
```

while 循环()中的表达式，运算结果可以是各种类型，但是最终都会转为真假，转换规则如下。

① Boolean：true 为真，false 为假；

② String：空字符串为假，所有非空字符串为真；

③ Number：0 为假，一切非 0 数字为真；

④ null/Undefined/NaN:全为假；

⑤ Object：全为真。

#### 2.do-while 循环

while 循环特点：先判断后执行；

do-while 循环特点：先执行再判断，即使初始条件不成立，do-while 循环至少执行一次；

```js
var num = 10;

do {
  document.write(num + "<br />"); //10 9 8 7 6 5 4 3 2 1 0
  num--;
} while (num >= 0);

document.write(num); //-1js
```

#### 3.for 循环

1. for 有三个表达式：① 声明循环变量；② 判断循环条件；③ 更新循环变量。

2. 三个表达式之间，用;分割，for 循环三个表达式都可以省略，但是两个“;”缺一不可。

3. for 循环的执行特点：先判断再执行，与 while 相同

4. for 循环三个表达式都可以有多部分组成，第二部分多个判断条件用&& ||连接，第一三部分用逗号分割；

```js
for (var num = 1; num <= 10; num++) {
  document.write(num + " <br />"); //1 2 3 4 5 6 7 8 9 10
}
```

#### 4. for-in 循环

for-in 循环主要用于遍历对象

for()中的格式：for(keys in zhangsan){}

keys 表示 obj 对象的每一个键值对的键！！所有循环中，需要使用 `obj[keys]` 来取到每一个值！！！

for-in 循环，遍历时不仅能读取对象自身上面的成员属性，也能延续原型链遍历出对象的原型属性所以，可以使用 hasOwnProperty 判断一个属性是不是对象自身上的属性。obj.hasOwnProperty(keys)==true 表示这个属性是对象的成员属性，而不是原先属性

```js
//声明一个Peson类
function Person() {
  this.name = "张三";
  this.age = 14;
  this.func1 = function () {};
}
//实例化这个类
var zhangsan = new Person();
//使用for-in遍历这个对象
for (keys in zhangsan) {
  console.log(zhangsan[keys]);
}
```

#### 5.for-of 循环

ES6 借鉴 C++、Java、C# 和 Python 语言，引入了 for...of 循环，作为遍历所有数据结构的统一的方法。

一个数据结构只要部署了 Symbol.iterator 属性，就被视为具有 iterator 接口，就可以用 for...of 循环遍历它的成员。也就是说，for...of 循环内部调用的是数据结构的 Symbol.iterator 方法。
　　 for...of 循环可以使用的范围包括数组、Set 和 Map 结构、某些类似数组的对象（比如 arguments 对象、DOM NodeList 对象）、 Generator 对象，以及字符串。

```js
var arr = ["a", "b", "c", "d"];

for (let a in arr) {
  console.log(a); // 0 1 2 3
}

for (let a of arr) {
  console.log(a); // a b c d
}
```

#### 6. forEach 循环

- forEach()方法需要一个函数作为参数，这个函数由我们创建但不由我们调用，称为回调函数。

- 数组中有几个元素函数执行几次，每次执行时，浏览器会将遍历元素以实参形式传递进来。

- foreach 遍历无法通过 break 跳出循环，如需要跳出，需要添加 try……catch 代码块

- 浏览器会在回调函数中传递三个参数：

1、当前正在遍历的元素；2、当前正在遍历的元素索引；3、正在遍历的数组。

```js
var arr = [1, 2, 3, 4];
arr.forEach((item, index, array) {
  console.log(item);
  console.log(index);
  console.log(array);
});
```

#### 7.循环控制语句

1、break：跳出本层循环，继续执行循环后面的语句。如果循环有多层，则 break 只能跳出一层。

2、continue：跳过本次循环剩余的代码，继续执行下一次循环。

① 对于 for 循环，continue 之后执行的语句，是循环变量更新语句 i++；

② 对于 while、do-while 循环，continue 之后执行的语句，是循环条件判断；因此，使用这两个循环时，必须将 continue 放到 i++之后使用，否则，continue 将跳过 i++进入死循环。

## 对象

基本数据类型都是单一的值，值和值之间没有任何联系，构不成整体。

对象是一种复合的数据类型，在对象中可以保存多个不同数据类型的属性。

### 内建对象

由 ES 标准中定义的对象，在任何的 ES 的实现中都可以使用。

Math String Number Boolean

平时使用的强制类型转换实际上调用的就是 String、Number 这些内建对象的方法

### 宿主对象

JS 运行环境提供的对象，主要指浏览器提供的对象：**BOM**、**DOM**。

### 自定义对象

自行创建对象，使用构造函数。new Object()

- 常规语法：对象.属性名

- 属性名：不强制要求遵守标识符命名规范。

- 写法：

```js
obj.name="***"

obj["name"]="***"

obj={name:"***",

​		gender:"***",

​		age:***"

};
```

1. 对象字面值的属性名可以加引号也可以不加，建议不加。

2. 如果要使用一些特殊的名字，则必须加引号。

3. 属性名和属性值是一组一组的键值对结构。

4. 键值之间使用 : 连接，多个键值对之间使用 , 隔开

5. 如果一个属性之后没有其他的属性，就不要写 ,

## 函数

函数也是一个对象，函数可以封装一些功能（代码），在需要时可以执行这些功能。

### 语法

var fun = new Function();

实际开发中很少使用构造函数来创建函数对象。更多使用函数声明创建。

function 函数名([形参 1, 形参 2, ……]) {

​ 语句……

}

### 参数

1.调用函数时解析器不会检查实参类型，所以要注意是否有可能接收到非法参数。

2.同时解析器也不会检查实参的数量。多余的实参不会被赋值。

3.如果实参的数量少于形参的数量，则没有对应实参的形参将是 undefined。

4.实参可以是任意数据类型，可以是对象，也可以是函数。

**注意：**

- fun()：是调用函数的意思，相当于使用函数返回值

- fun：是函数对象，相当于直接使用函数对象

### 返回值

### 返回值

1.返回值可以是任意数据类型，可以是对象也可以是函数。

2.返回值 return 如果不跟任何值则返回 **undefined**，不写 return 也返回 **undefined**。

### IIFE 立即执行函数

语法：(function() { \* \* \* \* \* \*})();

函数定义完，立即被调用，这种函数叫做立即执行函数。往往只会执行一次。

### 方法

函数可以成为对象的属性，如果一个函数作为一个对象的属性保存，那么称这个函数是这个对象的方法。

```js
var obj = {
  test: function () {
    console.log("hello");
  },
};
// "hello"
obj.test();
```

## 作用域

作用域指一个变量的作用范围

### 全局作用域

1. 全局作用域指直接编写在 script 标签中的 js 代码。

2. 全局作用域在页面打开时创建，在页面关闭时销毁。

3. 在全局作用域中有一个全局对象 window，它代表的是一个浏览器窗口，由浏览器创建，可直接使用。

4. 全局作用域中创建的变量都会作为 window 对象属性保存，创建的函数作为 window 对象方法保存。

5. 变量声明提前，使用 var 关键字声明的变量，会在所有代码执行之前被声明（但是不赋值）。但是如果声明变量时不使用 var 关键字，则变量不会被声明提前。

6. 函数声明提前，使用函数声明形式创建的函数 function 函数 K{}，它会在所有代码执行之前声明。但是使用函数表达式 var fun = function(){}创建的函数，能提前声明对象，但不会被赋值。

7. 全局作用域中的变量都是全局变量，在页面的任意部分都可以访问得到。

```js
// undefined，不会报错
console.log(carName);
var carName = " Volvo";

// 此处可调用 carName 变量
function myFunction() {
  // 函数内可调用 carName 变量
}
```

### 函数作用域

1. 调用函数时创建函数作用域，函数执行完毕以后，函数作用域销毁。

2. 每调用一次函数就会创建一个新的函数作用域，他们之间相互独立。

3. 函数作用域中可以访问到全局作用域变量，在全局作用域中无法访问到函数作用域的变量。

4. 函数作用域中操作变量时，会先在自身作用域中寻找，如果有就直接使用，没有则向上一级作用域寻找直到向全局作用域寻找。如果全局作用域仍未找到，则报错 ReferenceError。

5. 在函数中要访问全局变量可以使用 window 对象。

6. 在函数作用域也有提前声明特性，使用 var 关键字声明变量，会在函数中所有代码执行前提前声明。函数声明同理。

7. 如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量。

8. 定义形参就相当于在函数作用域中声明了变量

以下实例中 carName 在函数内，但是为全局变量。

```js
// 此处可调用 carName 变量

function myFunction() {
  carName = "Volvo";
  // 此处可调用 carName 变量
}
```

## 数组 Array

数组是一个对象，使用数字作为索引操作元素，不同于普通对象使用字符串作为属性名操作。

### 常见特性

- 如果读取不存在的索引，不会报错而是返回 undefined。

- 对非连续数组，length 获取数组最大索引+1 长度。（尽量不要创建非连续数组）

- 修改的 length 大于原长度，多余部分会空出来。

- 给数组最后一个元素后面添加元素：arr[length] = xxx;

### 字面量

数组中的元素可以是任意数据类型

var arr = [];

var arr2 = new Array( );

小区别：

arr = [10] 创建一个单元素 10 的数组

arr = new Array(10) 创建一个长度为 10 的数组

### 常用数组方法

#### 1. push

该方法可以向数组的末尾添加一个或多个元素，并返回数组的新长度

可以将要添加的元素作为方法的参数传递，这些元素会自动添加到数组末尾

该方法会将数组新的长度作为返回值返回

#### 2. pop

该方法可以删除数组的最后一个元素，并将被删除的元素作为返回值返回

#### 3. unshift

向数组开头添加一个或多个元素，并返回新的数组长度

向前边插入元素以后，其他的元素索引会依次调整

#### 4. shift

可以删除数组的第一个元素，并将被删除的元素作为返回值返回

#### 5. slice

可以用来从数组提取指定元素

该方法不会改变元素数组，而是将截取到的元素封装到一个新数组中返回

参数：

1.截取开始的位置索引，包含开始索引

2.截取结束的位置索引，不包含结束索引

- 第二个参数可以省略不写，此时会截取从开始索引往后的所有元素

- 索引可以传递一个负值，如果传递一个负值，则从后往前计算

#### 6. splice

可以用于删除数组中的指定元素

使用 splice() 会影响到原数组，会将指定元素从原数组中删除，并将被删除的元素作为返回值数组返回

参数：

1. 表示开始位置的索引

2. 表示删除的数量

3. 第三个及以后可以传递一些新的元素，这些元素将会自动插入到开始位置索引前

#### 7. concat

可以连接两个或多个数组，并将新的数组返回

该方法不会对原数组产生影响

#### 8. join

该方法可以将数组转换为一个字符串

该方法不会对原数组产生升影响，而是将转换后的字符串作为结果返回

在 join()中可以指定一个字符串作为参数，这个字符串将会成为数组中元素的连接符。如果不指定连接符，则默认使用 , 作为连接符。

#### 9. reverse

该方法用来反转数组（前边的去后边，后边的去前边）

该方法会直接修改原数组

#### 10. sort

可以用来对数组中的元素进行排序

也会影响原数组，默认会按照 Unicode 编码进行排序

- 即时对于纯数字的数组，使用 sort() 排序时，也会按照 Unicode 编码来排序，所以对数字进行默认排序时，可能会得到错误结果。

- 我们可以在 sort()添加一个回调函数，来指定排序规则

回调函数中需要定义两个形参，浏览器将会分别使用数组中的元素作为实参自动调用回调函数，使用哪个元素调用不确定，但肯定的是数组中 a 一定在 b 前面

- 浏览器会根据回调函数的返回值来决定元素的顺序：

1. 如果返回一个大于 0 的值，则元素会交换位置

2. 如果返回一个小于 0 的值，则元素位置不变

3. 如果返回一个 0，则认为两个元素相等，也不交换位置

#### 11. indexOf

检索一个数组是否含有指定元素。

如果数组中含有该元素，则返回其第一次出现的数组元素索引。如果没有返回-1。

可以指定第二个参数，指定开始查找的位置。

#### 12. lastIndexOf

可返回一个指定的字符串值最后出现的位置，如果指定第二个参数 start，则在一个字符串中的指定位置从后向前搜索

注意： 该方法将从后向前检索字符串，但返回是从起始位置 (0) 开始计算子字符串最后出现的位置。 看它是否含有字符串。

开始检索的位置在字符串的 start 处或字符串的结尾（没有指定 start 时）。

如果没有找到匹配字符串则返回 -1 。

## 日期 Date

在 JS 中使用 Date 对象表示一个时间

如果直接使用构造函数创建 Date 对象，会封装为当前代码执行时间。

日期格式 new Date("01/01/2021 00:00:00"); （括号内参数仅为 1 个，表示为毫秒）

| 方法       | 描述                                     |
| :--------- | :--------------------------------------- |
| getDate()  | 从 Date 对象返回一个月中的某一天(1~31) |
| getDay()   | 从 Date 对象返回一周中的某一天(0~6)    |
| getMonth() | 从 Date 对象返回月份(0~1)              |
| getFullYear()  | 从 Date 对象以四位数字返回年份 |
| getYear()  | 请使用getFullYear()方法代替 |
| getHours()  | 返回Date对象的小时(0~23) |
| getMinutes()  | 返回Date对象的分钟(0~59) |
| getSeconds()  | 返回Date对象的秒数(0~59) |
| getMilliseconds()  | 返回Date对象的毫秒(0~999) |
| getTime()  | 返回1970年1月1日至今的毫秒数 |
| Date.now() | 立即获取当前日期相对1970年1月1日的毫秒数时间戳 |

## 字符串 String

开始写 string
