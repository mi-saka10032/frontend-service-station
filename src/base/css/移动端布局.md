---
title: 移动端布局
order: 7
category: false
tag:
  - 移动端
  - 页面布局
  - 二倍图
  - flex弹性布局
---

## 现状

### 浏览器现状

UC QQ 欧朋 百度手机 360 安全 谷歌 搜狗手机 猎豹 以及其他杂牌浏览器。

以上均为移动端浏览器。

兼容移动端主流浏览器，处理 Webkit 内核浏览器即可。

### 手机屏幕

移动端设备屏幕尺寸非常多，碎片化严重。

Android 设备有多重分辨率：480x800，480x854，540x960，720x1280，1080x1920 等，甚至 2K、4K 屏等。

近年来 iPhone 的碎片化也加剧了，其设备的主要分辨率有：640x960，640x1136，750x1334，1242x2208 等。

作为开发者无需关注这些分辨率，因为我们常用的尺寸单位是 px。

### 移动端调试方法

Chrome DevTools（谷歌浏览器）模拟手机调试

搭建本地 Web 服务器，手机和服务器一个局域网内，通过手机访问服务器

使用外网服务器，直接 IP 或域名访问。

## 视口

视口就是浏览器显示页面内容的屏幕区域，视口可以分为**布局视口**、**视觉视口**和**理想视口**

### 布局视口 layout-viewport

一般移动设备的浏览器都默认设置了一个布局视口，用于解决早期 PC 端页面在手机上显示的问题

iOS，Android 基本都将这个视口分辨率设置为 980px，所以 PC 上的网页大多都能在手机上呈现，只不过元素看上去很小，一般默认可以通过手动缩放网页。

### 视觉视口 visual-viewport

它是用户正在看到的网站区域。**注意**：是网站的区域。

我们可以通过缩放去操作视觉视口，但不会影响布局视口，布局视口仍保持原来宽度。

### 理想视口 ideal-viewport

为了使网站在移动端有最理想的浏览和阅读宽度而设定

- 理想视口，对设备来讲，是最理想的视口尺寸

- 需要手动添写 meta 视口标签通知浏览器操作

- meta 视口标签的主要目的：布局视口的宽度应该与理想视口的宽度一致，简单理解就是设备有多宽，我们布局的视口就多宽

### 视口标签 meta

```html
<meta
  name="viewport"
  content="width=device-width,
  user-scalable=no,
  initial-scale=1.0,
  maximum-scale=1.0,
  minimum-scale=1.0"
/>
```

| 属性          | 解释说明                                                 |
| :------------ | :------------------------------------------------------- |
| width         | 宽度设置的是 viewport 宽度，可以设置 device-width 特殊值 |
| initial-scale | 初始缩放比，大于 0 的数字                                |
| maximum-scale | 最大缩放比，大于 0 的数字                                |
| minimum-scale | 最小缩放比，大于 0 的数字                                |
| user-scalable | 用户是否可以缩放，yes or no(1 or 0)                      |

**标准viewport设置**

- 视口宽度和设备保持一致

- 视口默认缩放比例1.0

- 不允许用户自行缩放

- 最大允许的缩放比例1.0

- 最小允许的缩放比例1.0

## 二倍图

### 物理像素&物理像素比

- 物理像素点指的是屏幕显示的最小颗粒，是物理真实存在的。

- 开发时候的1px不是一定等于1个物理像素的。

- 一个px能显示的物理像素点的个数，称为物理像素比或者屏幕像素比。

| 设备 | 尺寸(英寸) | 开发尺寸(px) | 物理像素比(dpr) |
| :---- | :---- | :---- | :---- |
| iphone3G | 3.5 | 320*480 | 1.0 |
| iphone4/4s | 3.5 | 320*480 | 2.0 |
| iphone5/5s/5c | 4.0 | 320*568 | 2.0 |
| HTC One M8 | 4.5 | 360*640 | 3.0 |
| iphone6 | 4.7 | 375*667 | 2.0 |
| Nexus 4 | 4.7 | 384*640 | 2.0 |
| Nexus 5x | 5.2 | 411*731 | 2.6 |
| iphone6 Plus | 5.5 | 414*736 | 3.0 |
| Samsung Galaxy Note 4 | 5.7 | 480*853 | 3.0 |
| Sony Xperia Z Ultra | 6.4 | 540*960 | 2.0 |
| Nexus 7('12) | 7.0 | 600*960 | 1.3 |
| iPad Mini | 7.9 | 768*1024 | 1.0 |

### 多倍图

- 在标准viewport设置中，使用倍图来提高图片质量，解决在高清设备中的模糊问题

- 通常使用二倍图，但也有3倍图4倍图的情况，看实际需求。

### 背景缩放 background-size

属性：background-size: 背景图片宽度 背景图片高度;

- 属性值可以是px(50px 50px)、方向词(left center)、cover、contain。

- 只写一个参数，高度省略的会等比例缩放。

- 里面的单位可以跟%，相对于父盒子而言。

- cover：把背景图像扩展至足够大，以使背景图像完全覆盖背景区域。

- contain：把图像扩展至最大尺寸，以使宽度和高度完全适应内容区域。

### 其他图片格式

- DPG图片压缩技术：京东自主研发的图片压缩技术，能够兼容jpeg，压缩后的图片和webp的清晰度对比没有差距。

- webp图片格式：谷歌开发的一种旨在加快图片加载速度的图片格式，图片压缩体积大约只有jpeg的2/3，节省大量服务器宽带资源和数据空间。

## 移动端开发选择

### 单独制作移动端页面（主流）

通常情况下，网站域名前面加m（mobile）可以打开移动端。通过判断设备，如果是移动设备打开，则跳转至移动端页面。 

### 响应式页面兼容移动端（其次）

通过判断屏幕宽度来改变样式，以适应不同终端。

缺点：制作麻烦，需要花很大精力去调兼容性问题。

## 移动端常见布局

移动端布局和PC端有所区别：

1.单独制作移动端页面（主流）

- 流式布局（百分比布局）

- flex弹性布局（强烈推荐）

- less+rem+媒体查询布局

- 混合布局

2.响应式页面兼容移动端（其次）

- 媒体查询

- bootstrap

### 流式布局（百分比布局）

流式布局，就是百分比布局，也称非固定像素布局。

通过盒子的宽度设置成百分比来根据屏幕的宽度进行伸缩，不受固定像素的限制，内容向两侧填充。

流式布局方式是移动web开发使用的比较常见的布局方式。

max-width：最大宽度；min-width：最小宽度。height同理

视口标签与样式初始化示例：

```html
<meta name="viewport" content="width=device-width, user-scalable=no,
initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
```

```css
body {
  margin: 0 auto;
  min-width: 320px;
  max-width: 640px;
  background: #fff;
  font-size: 14px;
  font-family: -apple-system, Helvetica, sans-serif;
  line-height: 1.5;
  color: #666;
}
```

### flex布局（非常重要）

传统布局：兼容性好、布局繁琐、局限性，不能在移动端很好布局。

flex弹性布局：操作方便，布局极简单，移动端应用广泛、IE11或更低版本部分支持、现阶段主流浏览器都支持，如今PC端也非常建议大量使用。

#### 布局原理

当我们为父盒子设为flex布局后，子元素的float、clear和vertical-align属性将失效。

伸缩布局=弹性布局=伸缩盒布局=弹性盒布局=flex布局

采用flex布局的元素，称为flex 容器，简称**容器**。它的所有子元素自动成为容器成员，称为flex 项目，简称**项目**。

**总结**：通过给父盒子添加flex属性，控制子盒子的位置和排列方式。

#### 容器属性

容器由主轴和侧轴按一定方向排列组成，默认x轴为主轴，水平向右、y轴为侧轴，水平向下。

1. flex-direction

flex-direction属性决定主轴方向（项目排列方向）。

| 属性值 | 说明 |
| :---- | :---- |
| row | 默认值从左到右 |
| row-reverse | 从右到左 |
| column | 从上到下 |
| column-reverse | 从下到上 |

<br>

2. justify-content

justify-content属性定义了项目在主轴上的对齐方式。

| 属性值 | 说明 |
| :---- | :---- |
| flex-start | 默认值 从头部开始 如果主轴是x轴，则从左到右 |
| flex-end | 从尾部开始 |
| center | 在主轴居中对齐（如果主轴是x轴则水平居中） |
| space-around | 平分剩余控件 |
| space-between | 先两边贴边 再平分剩余空间（重要） |

<br>

3. flex-wrap

flex-wrap属性定义，flex布局默认不换行。

| 属性值 | 说明 |
| :---- | :---- |
| nowrap | 默认值 不换行 |
| wrap | 换行 |

<br>

4. align-items（单行子项）

align-items控制子项在侧轴上的排列方式，在子项为单项的时候使用。

| 属性值 | 说明 |
| :---- | :---- |
| flex-start | 从上到下 |
| flex-end | 从下到上 |
| center | 挤在一起居中（垂直居中） |
| stretch | 默认值 拉伸 |

<br>

5. align-content（多行子项）

align-content设置子项在侧轴上的排列方式并且只能用于子项出现换行的情况，在单行下是没有效果的。

| 属性值 | 说明 |
| :---- | :---- |
| flex-start | 默认值 在侧轴的头部开始排列 |
| flex-end | 在侧轴的尾部开始排列 |
| center | 在侧轴中间显示 |
| space-around | 子项在侧轴平分剩余空间 |
| space-between | 子项在侧轴先分布在两头，再平分剩余空间 |
| stretch | 设置子项元素高度，平分父元素高度 |

<br>

6. align-content和align-items比较

align-items适用于单行情况，只有上对齐、下对齐、居中和拉伸。

align-content适用于多行情况下，单行情况失效，可以设置上对齐、下对齐、居中、拉伸以及平均分配剩余空间等属性值。

<br>

7. flex-flow

flex-flow是flex-direction和flex-wrap的复合属性

示例写法：flex-flow: column wrap;

<br>

**总结**

- flex-direction：设置主轴的方向

- justify-content：设置主轴上的子元素排列方式

- flex-wrap：设置子元素是否换行

- align-content：设置侧轴上的子元素的排列方式（多行）

- align-items：设置侧轴上的子元素排列方式（单行）

- flex-flow：复合属性，相当于同时设置了flex-direction和flex-wrap

#### 项目属性

1. order

order属性定义项目的排列顺序。

数值越小，排列越靠前，默认为0。注意和z-index不一样。

<br>

2. align-self

align-self 属性允许您为某个项目设置不同于其它项目的对齐方式，该属性可以覆盖 align-items 属性的值。

| 值 | 描述 |
| :---- | :---- |
| auto | 默认值 表示元素将继承其父容器的 align-items 属性值，<br>如果没有父容器，则为“stretch” |
| stretch | 项目将被拉伸以适合容器 |
| center | 项目位于容器的中央 |
| flex-start | 项目位于容器的顶部 |
| flex-end | 项目位于容器的底部 |
| baseline | 项目与容器的基线对齐 |
| initial | 将此属性设置为属性的默认值 |
| inherit | 从父元素继承属性的值 |

<br>

3. flex

flex 属性是 flex-grow、flex-shrink 和 flex-basis 三个属性的简写

语法：flex: flex-grow flex-shrink flex-basis;

参数说明如下：

- flex-grow：（必填参数）一个数字，用来设置项目相对于其他项目的增长量，默认值为 0；

- flex-shrink：（选填参数）一个数字，用来设置项目相对于其他项目的收缩量，默认值为 1；

- flex-basis：（选填参数）项目的长度，合法值为 auto（默认值，表示自动）、inherit（表示从父元素继承该属性的值） 或者以具体的值加 "%"、"px"、"em" 等单位的形式。

另外，flex 属性还有两个快捷值，分别为 auto（1 1 auto）和 none（0 0 auto）。

**总结**

- flex 子项目占的份数（增长比例、收缩比例）

- align-self 控制子项在侧轴的排列方式

- order 定义子项的排列顺序（先后顺序）